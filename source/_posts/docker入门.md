---
title: docker入门
date: 2018-07-13 13:39:08
tags:
---

## 什么是docker

### 环境配置难题

软件开发的最大麻烦之一，就是环境的配置。软件，硬件乃至于依赖的不一致，都会给软件的开发，部署以及测试造成种种困扰。有没有一种软件自带原始环境的解决方案呢?

### 虚拟机

对于软件环境的配置,虚拟机是一种解决方案，但是它有以下几个问题:

* 资源占用多：虚拟机会独占一部分内存和硬盘空间。它运行的时候，其他程序就不能使用这些资源了。哪怕虚拟机里面的应用程序，真正使用的内存只有 1MB，虚拟机依然需要几百 MB 的内存才能运行。
* 冗余步骤多:虚拟机是完整的操作系统，一些系统级别的操作步骤，往往无法跳过，比如用户登录。
* 启动慢：启动操作系统需要多久，启动虚拟机就需要多久。可能要等几分钟，应用程序才能真正运行。

### Linux 容器

由于虚拟机存在这些缺点，Linux 发展出了另一种虚拟化技术：Linux 容器（Linux Containers，缩写为 LXC）。

Linux 容器不是模拟一个完整的操作系统，而是对进程进行隔离。由于容器是进程级别的，相比虚拟机有很多优势：

* 启动快：容器里面的应用，直接就是底层系统的一个进程，而不是虚拟机内部的进程。所以，启动容器相当于启动本机的一个进程，而不是启动一个操作系统，速度就快很多。

* 资源占用少：容器只占用需要的资源，不占用那些没有用到的资源；虚拟机由于是完整的操作系统，不可避免要占用所有资源。另外，多个容器可以共享资源，虚拟机都是独享资源。

* 体积小：容器只要包含用到的组件即可，而虚拟机是整个操作系统的打包，所以容器文件比虚拟机文件要小很多。

### Docker 是什么

Docker 属于 Linux 容器的一种封装，提供简单易用的容器使用接口。Docker 的主要用途，目前有三大类：

* **提供一次性的环境：**比如，本地测试他人的软件、持续集成的时候提供单元测试和构建的环境。

* **提供弹性的云服务：**因为 Docker 容器可以随开随关，很适合动态扩容和缩容。

* **组建微服务架构：**。通过多个容器，一台机器可以跑多个服务，因此在本机就可以模拟出微服务架构。

## Docker 的安装

Docker 是一个开源的商业产品，有两个版本：社区版（Community Edition，缩写为 CE）和企业版（Enterprise Edition，缩写为 EE）。企业版包含了一些收费服务，个人开发者一般用不到。下面的介绍都针对社区版。

Docker CE 的安装请参考官方文档。

Mac
Windows
Ubuntu
Debian
CentOS
Fedora

其他 Linux 发行版
安装完成后，运行下面的命令，验证是否安装成功。


$ docker version
# 或者
$ docker info
Docker 需要用户具有 sudo 权限，为了避免每次命令都输入sudo，可以把用户加入 Docker 用户组（官方文档）。


$ sudo usermod -aG docker $USER
Docker 是服务器----客户端架构。命令行运行docker命令的时候，需要本机有 Docker 服务。如果这项服务没有启动，可以用下面的命令启动（官方文档）。


# service 命令的用法
$ sudo service docker start

# systemctl 命令的用法
$ sudo systemctl start docker
[Docker 入门教程](http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html)