---
title: shell基本运算符
date: 2019-04-15 13:14:35
tags: linux
---

# 5.shell基本运算符

Shell 和其他编程语言一样，支持多种运算符，包括：

* 算数运算符
* 关系运算符
* 布尔运算符
* 字符串运算符
* 文件测试运算符

原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr，expr 最常用。

## expr
expr 是一款表达式计算工具，使用它能完成表达式的求值操作。

```bash
#!/bin/bash

val=`expr 2 + 2`
echo "两数之和为 : $val"
```

执行脚本，输出结果如下所示：

```bash
两数之和为 : 4
```

两点注意：

>
表达式和运算符之间要有空格，例如 2+2 是不对的，必须写成 2 + 2，这与我们熟悉的大多数编程语言不一样。
完整的表达式要被 \` \` 包含，注意这个字符不是常用的单引号，在 Esc 键下边。

## 算术运算符

下表列出了常用的算术运算符，假定变量 a 为 10，变量 b 为 20：

```
+	 加法	`expr $a + $b` 结果为 30。
-	 减法	`expr $a - $b` 结果为 -10。
*	 乘法	`expr $a \* $b` 结果为  200。
/	 除法	`expr $b / $a` 结果为 2。
%	 取余	`expr $b % $a` 结果为 0。
=	 赋值	a=$b 将把变量 b 的值赋给 a。
==   相等。用于比较两个数字，相同则返回 true。	[ $a == $b ] 返回 false。
!=   不相等。用于比较两个数字，不相同则返回 true。	[ $a != $b ] 返回 true。
```

## 关系运算符

关系运算符**只支持数字，不支持字符串，除非字符串的值是数字**

```bash
eq  equal的缩写，表示等于为真
ne  not equal的缩写，表示不等于为真
gt  greater than的缩写，表示大于为真
ge  greater&equal的缩写，表示大于等于为真
lt  lower than的缩写，表示小于为真
le  lower&equal的缩写，表示小于等于为真
```

示例:
```
#!/bin/bash

a=10
b=20

if [ $a -eq $b ]
then
   echo "$a -eq $b : a 等于 b"
else
   echo "$a -eq $b: a 不等于 b"
fi
```

## 布尔运算符
下表列出了常用的布尔运算符，假定变量 a 为 10，变量 b 为 20：

```
!	非运算，表达式为 true 则返回 false，否则返回 true。	[ ! false ] 返回 true。
-o	或运算，有一个表达式为 true 则返回 true。	[ $a -lt 20 -o $b -gt 100 ] 返回 true。
-a	与运算，两个表达式都为 true 才返回 true。	[ $a -lt 20 -a $b -gt 100 ] 返回 false。
```

## 逻辑运算符
以下介绍 Shell 的逻辑运算符，假定变量 a 为 10，变量 b 为 20:

```
&&	逻辑的 AND	[[ $a -lt 100 && $b -gt 100 ]] 返回 false
||	逻辑的 OR	[[ $a -lt 100 || $b -gt 100 ]] 返回 true
```
## 字符串运算符

下表列出了常用的字符串运算符，假定变量 a 为 "abc"，变量 b 为 "efg"：

```
=	检测两个字符串是否相等，相等返回 true。	[ $a = $b ] 返回 false。
!=	检测两个字符串是否相等，不相等返回 true。	[ $a != $b ] 返回 true。
-z	检测字符串长度是否为0，为0返回 true。	[ -z $a ] 返回 false。
-n	检测字符串长度是否为0，不为0返回 true。	[ -n "$a" ] 返回 true。
$	检测字符串是否为空，不为空返回 true。	[ $a ] 返回 true。
```
## 文件测试运算符
文件测试运算符用于检测 Unix 文件的各种属性。
