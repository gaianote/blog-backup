---
title: docker访问宿主主机串行设备
date: 2019-03-05 12:05:55
tags: docker
---



## 1. 读取宿主主机设备的方案

1. 使用`--device`

```bash
$ docker run -t -i --device=/dev/ttyUSB0 ubuntu bash
```

2. 使用`--privileged`

```bash
$ docker run -t -i --privileged ubuntu bash
```

## 2. 特权模式

默认情况下，Docker的容器是没有特权的，例如不能在容器中再启动一个容器。这是因为默认情况下容器是不能访问任何其它设备的。但是通过`--privileged`，容器就拥有了访问任何其它设备的权限。

当操作者执行时，Docker将拥有访问主机所有设备的权限，同时Docker也会在apparmor或者selinux做一些设置，使容器可以容易的访问那些运行在容器外部的设备。

同时，你也可以限制容器只能访问一些指定的设备。下面的命令将允许容器只访问一些特定设备：

```bash
$ sudo docker run --device=/dev/snd:/dev/snd ...
```

1. 使用`--privileged`参数，可以访问宿主主机的所有设备

```bash
$ docker run -it --privileged ztest 

➜  serial git:(master) ls /dev 
tty43  tty52  tty61  ttyUSB1 ttyUSB2 ttyUSB3 ttyUSB4 ...
```

2. 不使用`--privileged`参数，无法访问宿主主机设备
```bash
[root@host192 ~]# docker run -it ztest
➜  /workspace ls /dev
console  core  fd  full  mqueue  null  ptmx  pts  random  shm  stderr  stdin  stdout  tty  ...
```

